{"version":3,"sources":["webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/guards/authenticated.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/services/auth.service.ts","webpack:///./src async","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import { Component, NgZone, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { AuthService } from './services/auth.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html'\n})\nexport class AppComponent implements OnInit, OnDestroy {\n\n  name: string;\n  authNameSub: Subscription;\n\n  constructor(private zone: NgZone, private router: Router, private authService: AuthService) { }\n\n  ngOnInit() {\n    this.authNameSub = this.authService.name.subscribe(name => {\n      this.zone.run(() => this.name = name);\n      if (!name) this.router.navigate(['/login']);\n    });\n  }\n\n  ngOnDestroy() {\n    this.authNameSub.unsubscribe();\n  }\n\n  logout() {\n    // redirect to login page currently happening through name subscription\n    this.authService.logout();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { HttpModule } from '@angular/http';\n\nimport { AppComponent } from './app.component';\nimport { AuthGuard } from './guards/authenticated';\nimport { AuthService } from './services/auth.service';\n\nconst ROUTES = [\n  { path: 'login', canActivate: [AuthGuard], loadChildren: './login/login.module#LoginModule' },\n  { path: '', canActivate: [AuthGuard], loadChildren: './home/home.module#HomeModule' },\n  { path: 'movies', canActivate: [AuthGuard], loadChildren: './movies/movies.module#MoviesModule' },\n  { path: '**', redirectTo: '/' }\n];\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    RouterModule.forRoot(ROUTES)\n  ],\n  bootstrap: [AppComponent],\n  providers: [AuthService, AuthGuard]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot, Route } from '@angular/router';\nimport { Observable } from 'rxjs/Observable';\nimport { of } from 'rxjs/observable/of';\n\nimport 'rxjs/add/operator/catch';\n\nimport { AuthService } from '../services/auth.service';\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n\n  constructor(private authService: AuthService, private router: Router) { }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n    return this.authService.isLoggedIn().map(() => {\n      if (state.url !== '/login') {\n        return true;\n      }\n      this.router.navigate(['']);\n      return false;\n    }).catch(() => {\n      if (state.url === '/login') {\n        return of(true);\n      }\n      this.router.navigate(['/login']);\n      return of(false);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/guards/authenticated.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","module.exports = \"<nav *ngIf=\\\"name\\\" class=\\\"navbar navbar-toggleable-md navbar-inverse bg-inverse\\\">\\n  <button class=\\\"navbar-toggler navbar-toggler-right\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#navbarCollapse\\\" aria-controls=\\\"navbarCollapse\\\" aria-expanded=\\\"false\\\" aria-label=\\\"Toggle navigation\\\">\\n    <span class=\\\"navbar-toggler-icon\\\"></span>\\n  </button>\\n  <a class=\\\"navbar-brand\\\" routerLink=\\\"\\\">Michael Movie Manager</a>\\n  <div class=\\\"collapse navbar-collapse\\\" id=\\\"navbarCollapse\\\">\\n    <ul class=\\\"navbar-nav mr-auto\\\">\\n      <li class=\\\"nav-item\\\" routerLinkActive=\\\"active\\\" [routerLinkActiveOptions]=\\\"{ exact: true }\\\">\\n        <a class=\\\"nav-link\\\" routerLink=\\\"\\\">Home</a>\\n      </li>\\n      <li class=\\\"nav-item\\\" routerLinkActive=\\\"active\\\">\\n        <a class=\\\"nav-link\\\" routerLink=\\\"movies\\\">Movies</a>\\n      </li>\\n    </ul>\\n    <ul class=\\\"navbar-nav\\\">\\n      <li class=\\\"nav-item\\\">\\n        <span class=\\\"navbar-text\\\" style=\\\"margin-right:10px\\\">Signed in as {{name}}</span>\\n        <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"logout()\\\">Logout</button>\\n      </li>\\n    </ul>\\n  </div>\\n</nav>\\n\\n<div class=\\\"container\\\" style=\\\"padding: 60px 15px 0;\\\">\\n  <router-outlet></router-outlet>\\n</div>\\n\\n<footer *ngIf=\\\"name\\\" class=\\\"footer\\\">\\n  <div class=\\\"container\\\" style=\\\"padding-left: 15px; padding-right: 15px;\\\">\\n    <span class=\\\"text-muted\\\">Footer</span>\\n  </div>\\n</footer>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 169\n// module chunks = 5","import { Injectable } from '@angular/core';\nimport { Http, Headers } from '@angular/http';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Subject } from 'rxjs/Subject';\n\nimport 'rxjs/add/operator/map';\n\ndeclare const gapi: any;\n\n@Injectable()\nexport class AuthService {\n\n  public name: Subject<string> = new Subject();\n  public auth2: BehaviorSubject<any> = new BehaviorSubject(null);\n  private _auth2: any;\n\n  constructor(private http: Http) {\n    // Intialize google api\n    gapi.load('auth2', () => {\n      this._auth2 = gapi.auth2.init({\n        client_id: '688955737235-o22bf9ejkcl83jg0q7h0lb6dhbfine76.apps.googleusercontent.com',\n        cookiepolicy: 'single_host_origin',\n        scope: 'profile'\n      });\n      // Notify subscribers when initialized (For attaching api handler to login button)\n      this.auth2.next(this._auth2);\n      // Listen for auth updates from google api and sync to server\n      this._auth2.isSignedIn.listen(isAuth => {\n        if (isAuth) {\n          let googleUser = this._auth2.currentUser.get();\n          this.login(googleUser.getAuthResponse().id_token, googleUser.getBasicProfile()).subscribe(() => {});\n        } else {\n          this.logout();\n        }\n      });\n    });\n  }\n\n  login(idToken, profile) {\n    console.log('Token || ' + idToken);\n    console.log('ID: ' + profile.getId());\n    console.log('Name: ' + profile.getName());\n    console.log('Image URL: ' + profile.getImageUrl());\n    console.log('Email: ' + profile.getEmail());\n    const headers = new Headers({ 'Content-Type': 'application/x-www-form-urlencoded' });\n    return this.http.post(`/api/googleauth?idtoken=${idToken}`, '', { headers })\n      .map(() => this.name.next(profile.getName()));\n  }\n\n  isLoggedIn() {\n    return this.http.get('/api/googleauth').map(response => response.json());\n  }\n\n  logout() {\n    this.http.delete('/api/googleauth').subscribe(() => {\n      this._auth2.signOut().then(() => this.name.next(undefined));\n    }, err => console.log(err)); // TODO: implement error handling\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/services/auth.service.ts","var map = {\n\t\"./home/home.module\": [\n\t\t200,\n\t\t2\n\t],\n\t\"./login/login.module\": [\n\t\t201,\n\t\t1\n\t],\n\t\"./movies/movies.module\": [\n\t\t202,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nmodule.exports = webpackAsyncContext;\nwebpackAsyncContext.id = 88;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 88\n// module chunks = 5","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}